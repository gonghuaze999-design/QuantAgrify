# QuantAgrify v3.3.6 Pro 版本更新报告

**作者:** Manus AI
**日期:** 2026年2月14日

## 1. 版本概述

QuantAgrify v3.3.6 Pro 版本标志着平台在数据架构上的重大飞跃，实现了**混合数据架构 (Hybrid Data Architecture)**。此版本成功集成了 Google Cloud BigQuery，使得平台能够高效处理 TB 级别的大规模历史数据，同时无缝对接实时市场数据流，极大地增强了平台的数据处理能力和可扩展性。

## 2. 核心功能增强：混合数据架构与 BigQuery 集成

v3.3.6 Pro 版本最核心的进步在于其数据层的升级，引入了 BigQuery 作为历史数据的主要存储和查询引擎。

### 关键特性：
*   **BigQuery 原生连接器**：
    *   **行为**：后端现在优先使用 `Google Cloud BigQuery` 进行历史 OHLCV（开盘价、最高价、最低价、收盘价、成交量）数据查询。它支持与 GCS (Google Cloud Storage) 存储桶关联的**外部表 (External Tables)**，这意味着可以直接查询存储在 GCS 中的海量 CSV 数据集，而无需预先导入到 BigQuery 中，实现了“查询即用”。
    *   **回退逻辑**：为了确保数据服务的连续性，如果 BigQuery 返回无数据或连接失败，系统会自动**故障转移 (Failover)** 到 `JQData`（实时 API），保证了数据源的零中断。
*   **Hive 分区支持**：
    *   系统能够识别 GCS 中按 Hive 风格组织的文件夹结构（例如，`gs://bucket/Corn/2023/*.csv`），并将其作为虚拟列进行处理。这允许用户根据资产类别（如玉米）高效过滤数据，而无需对数据库结构进行任何修改，极大地提升了数据管理的灵活性和查询效率。

## 3. 架构与核心模块状态

*   **前端内核**：继续采用 React 18 + TypeScript。`FuturesTrading.tsx` 模块现在会在界面头部清晰显示当前活跃的数据源（云数据库 vs. 实时 API），增强了用户对数据来源的透明度。
*   **数据总线**：`ApiConsole.tsx` 已更新，增加了针对 BigQuery 凭证和数据集发现的特定诊断功能，便于系统管理员进行故障排查和监控。
*   **模拟引擎**：`VirtualExchange` 保持稳定，继续支持基于 Ornstein-Uhlenbeck 随机模型的农产品资产模拟，未在此次更新中改动。

## 4. 后端中间件与质量保障

*   **后端中间件 (`backend/main.py`)**：后端版本升级至 `v3.3.6-PRO-HYBRID`，新增了 `BigQuery Client` 服务，与 GEE 代理和 JQData 桥接服务共同构成强大的数据处理能力。
*   **质量保障 (`tests/`)**：现有的测试套件（`audit_simulation.py` 和 `comprehensive_scenario_test.py`）继续为平台的算法完整性和鲁棒性提供保障。

## 5. 部署说明

*   **版本:** `3.3.6-Pro` (在 `metadata.json` 和 `SNAPSHOT_README.md` 中均标记为 `v3.3.6-Pro`)
*   **目标:** Web / Mobile / Tablet (响应式设计)。
*   **完整性:** 通过所有检查。

## 6. 总结

v3.3.6 Pro 版本通过引入混合数据架构和深度集成 Google Cloud BigQuery，极大地提升了 QuantAgrify 平台处理大规模历史数据的能力和效率。这一升级使得平台能够为用户提供更全面、更深入的市场分析，同时通过智能回退机制确保了数据服务的连续性。QuantAgrify 在保持其核心量化分析能力的同时，进一步巩固了其作为专业级农业大宗商品量化交易决策支持平台的领先地位。
